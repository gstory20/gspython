/****************************************************************************

        PROGRAM DESCRIPTION

        NAME            _remote_pause.c

        AUTHOR          Glenn Story

        DATE WRITTEN    12/23/18

        DESCRIPTION     Partial re-implementation of remote_pause.py in C

        MODIFICATION HISTORY

        {@change_history...@}

 ****************************************************************************/


/****************************************************************************

        Includes

 ****************************************************************************/

#include "gs.h"
#include <signal.h>

/****************************************************************************

        EQUATES

 ****************************************************************************/

/****************************************************************************

        MACRO DEFINITIONS

 ****************************************************************************/

#define PAUSE_SIGNAL SIGHUP
#define RESUME_SIGNAL SIGCONT

/****************************************************************************

        STRUCTURES

 ****************************************************************************/

/****************************************************************************

        TYPEDEFS

 ****************************************************************************/

/****************************************************************************

        Global data

 ****************************************************************************/

static int signal_state = RESUME_SIGNAL;

/****************************************************************************

        Routines defined in other modules

 ****************************************************************************/

/****************************************************************************

        Routines defined in this module

 ****************************************************************************/

static void catch_signal(int sig_type);
void set_handlers(void);
int get_signal_state(void);
/*^*/

static void catch_signal(int sig_type)
{
	signal_state = sig_type;
}

void set_handlers(void)
{
	signal (PAUSE_SIGNAL,  catch_signal);
	signal (RESUME_SIGNAL, catch_signal);
}

int get_signal_state(void)
{
	return signal_state;
}
